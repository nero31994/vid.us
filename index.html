<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>Movie & TV Explorer</title>

  <!-- ✅ Tailwind CSS (CDN) -->
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- ✅ Font Awesome -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"/>

  <style>
    /* Sidebar transition */
    #sidebar {
      transition: width 0.3s ease, transform 0.3s ease;
    }
    #sidebar.collapsed {
      width: 64px;
    }
    #sidebar.expanded {
      width: 220px;
    }

    /* Mobile overlay sidebar */
    @media (max-width: 640px) {
      #sidebar {
        position: fixed;
        top: 0; left: 0;
        height: 100%;
        transform: translateX(-100%);
        z-index: 50;
      }
      #sidebar.expanded {
        transform: translateX(0);
      }
    }

    /* Hide search input when collapsed */
    #search {
      opacity: 0;
      pointer-events: none;
      transition: opacity 0.3s ease;
    }
    #sidebar.expanded #search {
      opacity: 1;
      pointer-events: auto;
    }
  </style>
</head>
<body class="bg-black text-white h-screen flex">

  <!-- ✅ Sidebar -->
  <aside id="sidebar" class="collapsed bg-neutral-900 border-r border-neutral-800 flex flex-col">
    <!-- Toggle -->
    <button onclick="toggleSidebar()" class="p-4 text-xl text-white hover:bg-neutral-800">
      <i class="fas fa-bars"></i>
    </button>

    <!-- Controls -->
    <div class="flex-1 flex flex-col space-y-2 px-2">
      <button onclick="switchMode('movie')" class="flex items-center gap-2 px-2 py-2 hover:bg-neutral-800 rounded">
        <i class="fas fa-film"></i><span class="hidden sidebar-text">Movies</span>
      </button>
      <button onclick="switchMode('tv')" class="flex items-center gap-2 px-2 py-2 hover:bg-neutral-800 rounded">
        <i class="fas fa-tv"></i><span class="hidden sidebar-text">TV Series</span>
      </button>
      <button onclick="switchMode('anime')" class="flex items-center gap-2 px-2 py-2 hover:bg-neutral-800 rounded">
        <i class="fas fa-dragon"></i><span class="hidden sidebar-text">Anime</span>
      </button>
    </div>

    <!-- Search -->
    <div class="p-2 flex items-center gap-2">
      <i class="fas fa-search"></i>
      <input id="search" type="text" placeholder="Search..."
             class="flex-1 bg-neutral-800 px-2 py-1 rounded outline-none"
             oninput="debounceSearch()"/>
    </div>
  </aside>

  <!-- ✅ Content -->
  <main class="flex-1 overflow-y-auto">
    <div class="p-4 grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6 gap-4" id="movies">
      <!-- Example movie items -->
      <div class="bg-neutral-800 rounded cursor-pointer hover:bg-neutral-700" onclick="openIframe('https://vidsrc.cc/embed/movie/123')">
        <img src="https://via.placeholder.com/300x450" class="rounded" alt="Movie Poster"/>
      </div>
      <div class="bg-neutral-800 rounded cursor-pointer hover:bg-neutral-700" onclick="openIframe('https://vidsrc.cc/embed/movie/124')">
        <img src="https://via.placeholder.com/300x450" class="rounded" alt="Movie Poster"/>
      </div>
      <!-- more movies will load dynamically -->
    </div>
  </main>

  <!-- ✅ Player Modal -->
  <div id="videoContainer" class="hidden fixed inset-0 bg-black z-50">
    <button onclick="closeIframe()" class="absolute top-4 right-4 text-3xl text-white">×</button>
    <iframe id="videoFrame" allow="autoplay; fullscreen" allowfullscreen class="w-full h-full border-0"></iframe>
  </div>

  <!-- ✅ Scripts -->
  <script>
    const sidebar = document.getElementById("sidebar")

    function toggleSidebar() {
      sidebar.classList.toggle("expanded")
      sidebar.classList.toggle("collapsed")
    }

    function switchMode(mode) {
      console.log("Switched to:", mode)
    }

    // ✅ Debounced search
    let debounceTimeout
    function debounceSearch() {
      clearTimeout(debounceTimeout)
      debounceTimeout = setTimeout(() => {
        const val = document.getElementById("search").value.trim()
        if (val) {
          console.log("Searching:", val)
        } else {
          document.getElementById("movies").innerHTML = ""
        }
      }, 300)
    }

    // ✅ Video Player
    function openIframe(url) {
      document.getElementById("videoFrame").src = url
      document.getElementById("videoContainer").classList.remove("hidden")
    }
    function closeIframe() {
      document.getElementById("videoFrame").src = ""
      document.getElementById("videoContainer").classList.add("hidden")
    }
  </script>
</body>
</html>
